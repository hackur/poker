# Cloudflare Workers configuration for poker.jeremysarda.com
name = "poker"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Custom domain
routes = [
  { pattern = "poker.jeremysarda.com", custom_domain = true }
]

# Main worker
main = ".open-next/worker.js"

# Assets
assets = { directory = ".open-next/assets", binding = "ASSETS" }

# Environment variables (set via Cloudflare dashboard or wrangler secret)
[vars]
NEXTAUTH_URL = "https://poker.jeremysarda.com"

# KV namespace for sessions (create with: wrangler kv namespace create SESSIONS)
# [[kv_namespaces]]
# binding = "SESSIONS"
# id = "your-kv-id-here"

# D1 database (create with: wrangler d1 create poker-db)
# [[d1_databases]]
# binding = "DB"
# database_name = "poker-db"
# database_id = "your-d1-id-here"

# Build configuration
[build]
command = "npx @opennextjs/cloudflare build"

# Dev settings
[dev]
port = 3800
